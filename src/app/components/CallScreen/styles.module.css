/* src/app/components/CallScreen/styles.module.css */

/* --- CSS 変数 (固定色 - 暗め・さらにクリア調整) --- */
:root {
  /* 色 */
  --text-color-on-light-bg: #111827;
  --text-color-on-dark-bg: #ffffff;
  --text-color-muted: #9ca3af;
  --accent-color-self: #5b21b6; /* 暗めの紫 */

  --icon-color-muted: #dc2626;

  /* ボタン色 */
  --button-bg-rgba: 91, 33, 182, 0.55;
  --button-text-color: var(--text-color-on-dark-bg);
  --button-bg-hover-rgba: 76, 29, 149, 0.65;
  --button-bg-active-rgba: 67, 20, 119, 0.75;

  /* 無効ボタン */
  --button-bg-disabled-rgba: 229, 231, 235, 0.4;
  --button-text-disabled: #9ca3af;

  /* 背景 */
  --bg-self-rgba: 91, 33, 182, 0.5;
  --bg-other-rgba: 255, 255, 255, 0.45;

  /* ★ ボーダー色 (より繊細に) */
  --border-color-base: rgba(0, 0, 0, 0.05);
  --border-color-self: rgba(
    var(--accent-color-self),
    0.5
  ); /* ★ 紫系の薄いボーダー */
  --border-color-button: rgba(
    var(--accent-color-self),
    0.3
  ); /* ★ ボタン用の少し濃い紫系ボーダー */
  --border-color-button-hover: rgba(var(--accent-color-self), 0.4);
  --border-color-disabled: rgba(
    209,
    213,
    219,
    0.5
  ); /* ★ 無効時のグレーボーダー */

  /* その他 */
  --blur-intensity: 14px;
  --border-radius: 14px;
  --shadow:
    0 4px 6px -1px rgba(0, 0, 0, 0.06), 0 2px 4px -2px rgba(0, 0, 0, 0.04);
  --transition-duration: 0.2s;
}

/* --- スタイル定義 --- */

/* --- 全体コンテナ --- */
.container {
  display: flex;
  flex-direction: row;
  height: calc(100vh - 70px); /* フッターの高さを考慮 */
  overflow: hidden;
}

.participantList {
  order: 1;
  width: 280px;
  flex-shrink: 0;
  overflow-y: auto;
  background: linear-gradient(
    180deg,
    rgba(10, 10, 20, 0.9) 0%,
    rgba(30, 20, 50, 0.95) 100%
  );
  padding: 20px;
  border-right: 1px solid #444; /* 区切り線の色も調整 */
  display: flex;
  flex-direction: column;
  gap: 14px;
  list-style: none;
}

.participantItem {
  /* ↓↓↓ 暗い背景に合わせた調整 (例) ↓↓↓ */
  background-color: rgba(255, 255, 255, 0.05); /* 少し明るい背景 */
  color: var(--text-color-on-dark-bg); /* 白い文字 */
  border: 1px solid rgba(255, 255, 255, 0.1); /* 明るいボーダー */
  /* ↑↑↑ 暗い背景に合わせた調整 (例) ↑↑↑ */

  backdrop-filter: blur(var(--blur-intensity));
  -webkit-backdrop-filter: blur(var(--blur-intensity));
  padding: 16px 22px;
  border-radius: var(--border-radius);
  box-shadow: var(--shadow);
  display: flex;
  align-items: center;
  justify-content: space-between;
  transition:
    transform var(--transition-duration) ease,
    box-shadow var(--transition-duration) ease,
    background-color var(--transition-duration) ease,
    border-color var(--transition-duration) ease;
}

.selfParticipant {
  background-color: rgba(
    var(--bg-self-rgba)
  ); /* これは変数なのでそのままでも良いかも */
  color: var(--text-color-on-dark-bg);
  border-color: var(--border-color-self); /* 変数を使う */
}

.participantName {
  flex-grow: 1;
  margin-right: 12px;
  font-weight: 500;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.muteIcon {
  font-size: 1.1rem;
  flex-shrink: 0;
  color: var(--text-color-muted);
  transition:
    color var(--transition-duration) ease,
    transform var(--transition-duration) ease;
}

.selfParticipant .muteIcon {
  color: rgba(255, 255, 255, 0.75);
}

.muted {
  color: var(--icon-color-muted);
}

.selfParticipant .muted {
  color: #fca5a5;
}

li.speakingParticipant {
  /* 影をつける
  box-shadow: 0 0 10px 3px rgba(var(--accent-color-speaking), 0.7);
  /* ボーダーの色を変える */
  /* border-color: rgba(var(--accent-color-speaking), 0.3); */

  box-shadow: 0 0 10px 3px rgba(var(--accent-color-primary-rgb), 0.7);
  border-color: rgba(var(--accent-color-primary-rgb), 0.8);
}
.speakingParticipant .muteIcon:not(.muted) {
  color: rgba(var(--accent-color-primary-rgb), 1);
}
/* --- ボタン共通スタイル (ボーダー色調整) --- */
.button {
  background-color: rgba(var(--button-bg-rgba));
  backdrop-filter: blur(var(--blur-intensity));
  -webkit-backdrop-filter: blur(var(--blur-intensity));
  color: var(--button-text-color);
  border: 1px solid var(--border-color-button); /* ★ ボタン用ボーダー色適用 */
  padding: 12px 20px;
  border-radius: var(--border-radius);
  cursor: pointer;
  font-size: 0.95rem;
  font-weight: 600;
  margin: 8px 5px;
  transition: all var(--transition-duration) ease;
  box-shadow: var(--shadow);
}

.button:hover:not(:disabled) {
  background-color: rgba(var(--button-bg-hover-rgba));
  border-color: var(--border-color-button-hover); /* ★ ホバー時ボーダー色適用 */
  box-shadow:
    0 7px 10px -3px rgba(0, 0, 0, 0.08),
    0 4px 6px -4px rgba(0, 0, 0, 0.06);
  transform: translateY(-2px);
}

.button:active:not(:disabled) {
  background-color: rgba(var(--button-bg-active-rgba));
  border-color: var(
    --border-color-button
  ); /* アクティブ時は通常ボーダーに戻すなど */
  transform: translateY(0px);
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
}

.button:disabled {
  background-color: rgba(var(--button-bg-disabled-rgba));
  backdrop-filter: blur(var(--blur-intensity));
  -webkit-backdrop-filter: blur(var(--blur-intensity));
  color: var(--button-text-disabled);
  border: 1px solid var(--border-color-disabled); /* ★ 無効時ボーダー色適用 */
  cursor: not-allowed;
  box-shadow: none;
  transform: none;
}

.deviceSelectors {
  display: flex;
  gap: 20px;
  margin-bottom: 20px;
  align-items: center;
}

.deviceSelectors label {
  margin-right: 8px;
}

.deviceSelectors select {
  padding: 8px 12px;
  border-radius: 8px;
  border: 1px solid rgba(0, 0, 0, 0.1);
  min-width: 150px;
}

/* ★★★ 画面共有エリアのスタイル ★★★ */
.screenShareArea {
  order: 2;
  flex: 1;
  height: 100%;
  background: linear-gradient(/* ... */);
  position: relative; /* ローディング表示などの基準に */
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* ↓↓↓ ローカルプレビューのスタイルを修正 ↓↓↓ */
.screenVideo ,
/* 既存の受信ビデオスタイル  */
.localScreenPreview {
  display: block;
  max-width: 100%; /* 親要素に合わせる */
  max-height: 100%; /* 親要素に合わせる */
  object-fit: contain; /* アスペクト比を維持 */
  background-color: #000;

  /* position: absolute; や width, bottom, right などは削除 */
  /* 必要であれば枠線などを追加 */
  /* border: 2px dashed rgba(255, 255, 255, 0.3); */
}

/* 共有がない場合やローディング中のスタイル */
.loadingScreenShare,
.noScreenShare {
  /* position: absolute;
  top: 0;
  left: 0; */ /* display:flex を使っているので不要 */
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  color: #ccc;
  font-size: 1.1em;
  text-align: center;
  padding: 20px;
}

.sharingIndicator {
  margin-top: 5px; /* screenShareArea との間隔を少し詰める */
  margin-bottom: 15px; /* 参加者リストとの間隔 */
  padding: 8px 15px;
  background-color: rgba(76, 175, 80, 0.8); /* 少し透明度のある緑 */
  color: white;
  border-radius: 4px;
  text-align: center;
  font-weight: 500; /* 少し細めに */
  display: inline-block; /* 幅を内容に合わせる */
  max-width: 90%; /* 長すぎる場合に備える */
}
